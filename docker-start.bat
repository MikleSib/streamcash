@echo off
chcp 65001 >nul

echo üöÄ –ó–∞–ø—É—Å–∫ DonationAlerts –†–§...

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ .env —Ñ–∞–π–ª–∞
if not exist .env (
    echo üìù –°–æ–∑–¥–∞—é .env —Ñ–∞–π–ª –∏–∑ .env.example...
    copy .env.example .env >nul
    echo ‚ö†Ô∏è  –ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ .env
)

:: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –∑–∞–ø—É—Å–∫–∞
echo –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∑–∞–ø—É—Å–∫–∞:
echo 1^) –ü—Ä–æ–¥–∞–∫—à–Ω ^(docker-compose.yml^)
echo 2^) –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ^(docker-compose.dev.yml^)
set /p choice="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1 –∏–ª–∏ 2): "

if "%choice%"=="1" (
    echo üîß –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ...
    docker-compose down
    docker-compose up --build -d
    echo ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ!
    echo üåê –§—Ä–æ–Ω—Ç–µ–Ω–¥: http://localhost:3000
    echo üîß API: http://localhost:8000
    echo üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs
) else if "%choice%"=="2" (
    echo üîß –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...
    docker-compose -f docker-compose.dev.yml down
    docker-compose -f docker-compose.dev.yml up --build
) else (
    echo ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –í—ã–±–µ—Ä–∏—Ç–µ 1 –∏–ª–∏ 2.
    pause
    exit /b 1
)

echo.
echo üìã –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
echo   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: docker-compose down
echo   - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏: docker-compose logs -f
echo   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: docker-compose restart

pause 